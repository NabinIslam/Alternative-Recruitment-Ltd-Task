"use client";

import { motion, useAnimation } from "framer-motion";
import { useInView } from "react-intersection-observer";
import { useEffect } from "react";

const boxVariant = {
  visible: { opacity: 1, scale: 1, transition: { duration: 0.5 } },
  hidden: { opacity: 0, scale: 0 },
};

const TimelineStep5 = () => {
  const control = useAnimation();
  const [ref, inView] = useInView();

  useEffect(() => {
    if (inView) {
      control.start("visible");
    } else {
      control.start("hidden");
    }
  }, [control, inView]);

  return (
    <div className="flex h-[220px] items-center justify-between">
      <div className="basis-full lg:basis-[45%]">
        <motion.div
          ref={ref}
          variants={boxVariant}
          initial="hidden"
          animate={control}
          className="min-h-[183px] rounded-xl bg-none bg-contain bg-right bg-no-repeat pb-7 pt-5 lg:bg-timeline-card-bg lg:px-10"
        >
          <div className="flex h-full items-center justify-between gap-2 rounded-full border bg-white bg-timeline-card-inner-bg bg-contain bg-left bg-no-repeat p-4 text-black shadow">
            <div>
              <svg
                width="110"
                height="111"
                viewBox="0 0 110 111"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <g filter="url(#filter0_d_785_2650)">
                  <ellipse
                    cx="55"
                    cy="55.4269"
                    rx="50"
                    ry="49.771"
                    fill="#FBFBFB"
                  />
                </g>
                <path
                  d="M72.8125 55.8002C70.75 55.8002 69.0625 57.48 69.0625 59.5331V60.1397C70.1969 60.6996 71.4625 61.0262 72.8125 61.0262C74.1625 61.0262 75.4281 60.7089 76.5625 60.1397V59.5331C76.5625 57.48 74.8844 55.8002 72.8125 55.8002ZM74.9969 51.7595C74.9969 50.5556 74.0219 49.5851 72.8125 49.5851C71.6125 49.5851 70.6281 50.5556 70.6281 51.7595C70.6281 52.9633 71.6125 53.9338 72.8125 53.9338C74.0219 53.9338 74.9969 52.9633 74.9969 51.7595Z"
                  fill="#F90945"
                />
                <path
                  d="M72.8125 44.2284C68.1625 44.2284 64.375 47.9985 64.375 52.6273C64.375 55.1283 65.4813 57.3679 67.225 58.9077C67.4313 57.0973 68.5094 55.5482 70.0187 54.6803C69.6194 54.3047 69.3011 53.8519 69.0835 53.3497C68.8659 52.8475 68.7535 52.3063 68.7531 51.7594C68.7531 49.529 70.5719 47.7186 72.8125 47.7186C75.0531 47.7186 76.8719 49.529 76.8719 51.7594C76.8719 52.9072 76.3844 53.9431 75.6063 54.6803C77.125 55.5482 78.1937 57.0973 78.4 58.9077C79.2955 58.1221 80.0128 57.1557 80.5042 56.0729C80.9955 54.99 81.2498 53.8155 81.25 52.6273C81.25 47.9985 77.4625 44.2284 72.8125 44.2284ZM37.1875 55.8002C35.125 55.8002 33.4375 57.4799 33.4375 59.533V60.1396C34.5719 60.6995 35.8375 61.0261 37.1875 61.0261C38.5375 61.0261 39.8031 60.7088 40.9375 60.1396V59.533C40.9375 57.4799 39.2594 55.8002 37.1875 55.8002ZM39.3719 51.7594C39.3719 50.5555 38.3969 49.585 37.1875 49.585C35.9875 49.585 35.0031 50.5555 35.0031 51.7594C35.0031 52.9632 35.9875 53.9337 37.1875 53.9337C38.3969 53.9337 39.3719 52.9632 39.3719 51.7594Z"
                  fill="#F90945"
                />
                <path
                  d="M37.1875 44.2284C32.5375 44.2284 28.75 47.9986 28.75 52.6273C28.75 55.1283 29.8562 57.368 31.6 58.9078C31.8062 57.0974 32.8844 55.5482 34.3938 54.6804C33.9944 54.3047 33.6761 53.852 33.4585 53.3497C33.2409 52.8475 33.1285 52.3064 33.1281 51.7594C33.1281 49.5291 34.9469 47.7186 37.1875 47.7186C39.4281 47.7186 41.2469 49.5291 41.2469 51.7594C41.2469 52.9073 40.7594 53.9431 39.9812 54.6804C41.5 55.5482 42.5687 57.0974 42.775 58.9078C43.6705 58.1221 44.3878 57.1558 44.8792 56.0729C45.3705 54.9901 45.6248 53.8155 45.625 52.6273C45.625 47.9986 41.8375 44.2284 37.1875 44.2284ZM50.3125 48.7825V49.6317C51.7188 50.3503 53.3125 50.7609 55 50.7609C56.6875 50.7609 58.2812 50.3503 59.6875 49.6317V48.7825C59.6875 46.2162 57.5875 44.1165 55 44.1165C52.4125 44.1165 50.3125 46.2162 50.3125 48.7825Z"
                  fill="#F90945"
                />
                <path
                  d="M55 42.25C56.5533 42.25 57.8125 40.9966 57.8125 39.4504C57.8125 37.9042 56.5533 36.6508 55 36.6508C53.4467 36.6508 52.1875 37.9042 52.1875 39.4504C52.1875 40.9966 53.4467 42.25 55 42.25Z"
                  fill="#F90945"
                />
                <path
                  d="M48.4563 48.4279C48.5206 47.2949 48.8793 46.198 49.4971 45.2443C50.115 44.2907 50.971 43.513 51.9813 42.9873C51.4599 42.5554 51.0402 42.0147 50.7518 41.4036C50.4634 40.7924 50.3135 40.1256 50.3125 39.4504C50.3125 36.8841 52.4125 34.7844 55 34.7844C57.5875 34.7844 59.6875 36.8841 59.6875 39.4504C59.6875 40.8782 59.0313 42.1381 58.0188 42.9873C59.0291 43.513 59.885 44.2907 60.5029 45.2443C61.1207 46.198 61.4794 47.2949 61.5437 48.4279C62.7218 47.4651 63.6708 46.2544 64.3225 44.8828C64.9741 43.5112 65.3123 42.0129 65.3125 40.4956C65.3125 34.8404 60.6906 30.2303 55 30.2303C49.3094 30.2303 44.6875 34.8404 44.6875 40.4956C44.6877 42.0129 45.0259 43.5112 45.6775 44.8828C46.3292 46.2544 47.2782 47.4651 48.4563 48.4279ZM48.9062 79.6903C48.9062 79.9378 49.005 80.1752 49.1808 80.3502C49.3567 80.5252 49.5951 80.6235 49.8438 80.6235H62.9688C63.2174 80.6235 63.4558 80.5252 63.6317 80.3502C63.8075 80.1752 63.9062 79.9378 63.9062 79.6903V76.8907H48.9062V79.6903ZM61.0938 61.6794H57.3438V55.6136C57.3438 54.9697 57.0813 54.3817 56.6594 53.9618C56.3316 53.6347 55.9136 53.4118 55.4584 53.3214C55.0032 53.2311 54.5313 53.2773 54.1025 53.4542C53.6737 53.6311 53.3074 53.9308 53.0499 54.3152C52.7924 54.6997 52.6554 55.1515 52.6562 55.6136V66.3455C52.6562 66.8587 52.2344 67.2787 51.7188 67.2787C51.2031 67.2787 50.7812 66.8587 50.7812 66.3455V61.7727C49.7225 61.9879 48.7709 62.5605 48.0875 63.3938C47.4042 64.2271 47.031 65.2698 47.0312 66.3455V70.2463C47.0312 71.5341 47.4156 72.7939 48.1375 73.8671L48.9062 75.0243H63.9062L64.675 73.8764C65.3975 72.799 65.7825 71.5323 65.7812 70.2369V66.3455C65.7812 63.7698 63.6812 61.6794 61.0938 61.6794Z"
                  fill="#F90945"
                />
                <defs>
                  <filter
                    id="filter0_d_785_2650"
                    x="0"
                    y="0.655884"
                    width="110"
                    height="109.542"
                    filterUnits="userSpaceOnUse"
                    colorInterpolationFilters="sRGB"
                  >
                    <feFlood floodOpacity="0" result="BackgroundImageFix" />
                    <feColorMatrix
                      in="SourceAlpha"
                      type="matrix"
                      values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"
                      result="hardAlpha"
                    />
                    <feOffset />
                    <feGaussianBlur stdDeviation="2.5" />
                    <feComposite in2="hardAlpha" operator="out" />
                    <feColorMatrix
                      type="matrix"
                      values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.2 0"
                    />
                    <feBlend
                      mode="normal"
                      in2="BackgroundImageFix"
                      result="effect1_dropShadow_785_2650"
                    />
                    <feBlend
                      mode="normal"
                      in="SourceGraphic"
                      in2="effect1_dropShadow_785_2650"
                      result="shape"
                    />
                  </filter>
                </defs>
              </svg>
            </div>
            <div className="basis-[50%] text-center">
              <h3 className="mb-1 text-2xl font-medium">Final Selection</h3>
              <p className="text-sm font-medium leading-tight">
                We carefully shortlist and present top candidates for your
                approval, streamlining the hiring process for you.
              </p>
            </div>
            <div className="size-[100px] basis-[100px] rounded-full border p-2 shadow">
              <div className="flex size-full items-center justify-center rounded-full bg-primary text-sm text-white">
                Step 5
              </div>
            </div>
          </div>
        </motion.div>
      </div>
      <div className="-order-1 hidden h-full items-center justify-center lg:order-none lg:flex">
        <div className="relative mx-auto h-full w-1 bg-primary">
          <svg
            className="absolute left-[-15px] top-[90px]"
            width="34"
            height="34"
            viewBox="0 0 34 34"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <g filter="url(#filter0_d_779_3535)">
              <ellipse cx="17" cy="16.945" rx="12" ry="11.945" fill="#FBFBFB" />
              <path
                d="M28.6695 14.1493C28.8146 14.7513 28.9138 15.3711 28.9634 16.0048L28.4649 16.0438C28.4881 16.3411 28.5 16.6416 28.5 16.945C28.5 17.2485 28.4881 17.549 28.4649 17.8463L28.9634 17.8853C28.9138 18.519 28.8146 19.1388 28.6695 19.7408L28.1834 19.6237C28.0415 20.2128 27.8538 20.7841 27.6243 21.3338L28.0857 21.5264C27.8428 22.1081 27.5551 22.6665 27.2268 23.1975L26.8015 22.9345C26.4848 23.4467 26.1287 23.9322 25.7373 24.3869L26.1163 24.7131C25.7073 25.1883 25.2614 25.6311 24.7831 26.0371L24.4595 25.656C24.0025 26.044 23.5145 26.3971 22.9999 26.7109L23.2603 27.1378C22.7277 27.4626 22.1677 27.7472 21.5845 27.9874L21.3941 27.5251C20.8433 27.7519 20.2709 27.9374 19.6809 28.0776L19.7965 28.564C19.1941 28.7071 18.5741 28.8051 17.9403 28.854L17.9018 28.3554C17.6043 28.3784 17.3036 28.3901 17 28.3901C16.6964 28.3901 16.3957 28.3784 16.0982 28.3554L16.0597 28.854C15.4259 28.8051 14.8059 28.7071 14.2035 28.564L14.3191 28.0776C13.7291 27.9374 13.1567 27.7519 12.6059 27.5251L12.4155 27.9874C11.8323 27.7472 11.2723 27.4626 10.7397 27.1378L11.0001 26.7109C10.4855 26.3971 9.99754 26.044 9.54047 25.656L9.21686 26.0371C8.73859 25.6311 8.29275 25.1883 7.88374 24.7131L8.26269 24.3869C7.8713 23.9322 7.51517 23.4467 7.19848 22.9345L6.77321 23.1975C6.44492 22.6665 6.15718 22.1081 5.9143 21.5264L6.3757 21.3338C6.14617 20.7841 5.95848 20.2128 5.81658 19.6237L5.33049 19.7408C5.18544 19.1388 5.0862 18.519 5.03663 17.8853L5.53511 17.8463C5.51185 17.549 5.5 17.2485 5.5 16.945C5.5 16.6416 5.51185 16.3411 5.53511 16.0438L5.03663 16.0048C5.0862 15.3711 5.18544 14.7513 5.33049 14.1493L5.81658 14.2664C5.95848 13.6773 6.14617 13.106 6.3757 12.5563L5.9143 12.3637C6.15718 11.782 6.44492 11.2236 6.77321 10.6926L7.19848 10.9556C7.51517 10.4434 7.8713 9.95788 8.26269 9.50318L7.88375 9.17699C8.29275 8.70184 8.73859 8.25903 9.21686 7.85296L9.54047 8.23411C9.99754 7.84605 10.4855 7.49302 11.0001 7.17917L10.7397 6.7523C11.2723 6.42748 11.8323 6.14287 12.4155 5.9027L12.6059 6.36503C13.1567 6.13819 13.7291 5.95273 14.3191 5.81254L14.2035 5.32608C14.8059 5.18295 15.4259 5.08503 16.0597 5.03613L16.0982 5.53465C16.3957 5.5117 16.6964 5.5 17 5.5C17.3036 5.5 17.6043 5.5117 17.9018 5.53465L17.9403 5.03613C18.5741 5.08503 19.1941 5.18295 19.7965 5.32608L19.6809 5.81254C20.2709 5.95273 20.8433 6.13819 21.3941 6.36503L21.5845 5.9027C22.1677 6.14287 22.7277 6.42748 23.2603 6.7523L22.9999 7.17917C23.5145 7.49302 24.0025 7.84605 24.4595 8.23411L24.7831 7.85296C25.2614 8.25903 25.7073 8.70184 26.1163 9.17699L25.7373 9.50318C26.1287 9.95788 26.4848 10.4434 26.8015 10.9556L27.2268 10.6926C27.5551 11.2236 27.8428 11.782 28.0857 12.3637L27.6243 12.5563C27.8538 13.106 28.0415 13.6773 28.1834 14.2664L28.6695 14.1493Z"
                stroke="#F90945"
                strokeDasharray="2 2"
              />
            </g>
            <g filter="url(#filter1_d_779_3535)">
              <ellipse cx="17" cy="16.945" rx="9" ry="8.95879" fill="#F90945" />
            </g>
            <defs>
              <filter
                id="filter0_d_779_3535"
                x="0"
                y="0"
                width="34"
                height="33.8901"
                filterUnits="userSpaceOnUse"
                colorInterpolationFilters="sRGB"
              >
                <feFlood floodOpacity="0" result="BackgroundImageFix" />
                <feColorMatrix
                  in="SourceAlpha"
                  type="matrix"
                  values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"
                  result="hardAlpha"
                />
                <feOffset />
                <feGaussianBlur stdDeviation="2.5" />
                <feComposite in2="hardAlpha" operator="out" />
                <feColorMatrix
                  type="matrix"
                  values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.2 0"
                />
                <feBlend
                  mode="normal"
                  in2="BackgroundImageFix"
                  result="effect1_dropShadow_779_3535"
                />
                <feBlend
                  mode="normal"
                  in="SourceGraphic"
                  in2="effect1_dropShadow_779_3535"
                  result="shape"
                />
              </filter>
              <filter
                id="filter1_d_779_3535"
                x="3"
                y="2.98624"
                width="28"
                height="27.9176"
                filterUnits="userSpaceOnUse"
                colorInterpolationFilters="sRGB"
              >
                <feFlood floodOpacity="0" result="BackgroundImageFix" />
                <feColorMatrix
                  in="SourceAlpha"
                  type="matrix"
                  values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"
                  result="hardAlpha"
                />
                <feOffset />
                <feGaussianBlur stdDeviation="2.5" />
                <feComposite in2="hardAlpha" operator="out" />
                <feColorMatrix
                  type="matrix"
                  values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.2 0"
                />
                <feBlend
                  mode="normal"
                  in2="BackgroundImageFix"
                  result="effect1_dropShadow_779_3535"
                />
                <feBlend
                  mode="normal"
                  in="SourceGraphic"
                  in2="effect1_dropShadow_779_3535"
                  result="shape"
                />
              </filter>
            </defs>
          </svg>
        </div>
      </div>
      <div className="hidden lg:block lg:basis-[45%]"></div>
    </div>
  );
};

export default TimelineStep5;

"use client";

import { motion, useAnimation } from "framer-motion";
import { useInView } from "react-intersection-observer";
import { useEffect } from "react";

const boxVariant = {
  visible: { opacity: 1, scale: 1, transition: { duration: 0.5 } },
  hidden: { opacity: 0, scale: 0 },
};

const TimelineStep3 = () => {
  const control = useAnimation();
  const [ref, inView] = useInView();

  useEffect(() => {
    if (inView) {
      control.start("visible");
    } else {
      control.start("hidden");
    }
  }, [control, inView]);

  return (
    <div className="flex h-[220px] items-center justify-between">
      <div className="basis-[45%]">
        <motion.div
          ref={ref}
          variants={boxVariant}
          initial="hidden"
          animate={control}
          className="min-h-[183px] rounded-xl bg-timeline-card-bg bg-contain bg-right bg-no-repeat px-10 pb-7 pt-5"
        >
          <div className="flex h-full items-center justify-between gap-2 rounded-full border bg-white bg-timeline-card-inner-bg bg-contain bg-left bg-no-repeat p-4 text-black shadow">
            <div>
              <svg
                width="110"
                height="111"
                viewBox="0 0 110 111"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <g filter="url(#filter0_d_783_2634)">
                  <ellipse
                    cx="55"
                    cy="55.3915"
                    rx="50"
                    ry="49.771"
                    fill="#FBFBFB"
                  />
                </g>
                <g clip-path="url(#clip0_783_2634)">
                  <path
                    d="M80.3628 28.2437H29.6355C27.5446 28.2437 25.9082 29.8725 25.9082 31.9539V69.3274C25.9082 71.4087 27.5446 73.0376 29.6355 73.0376H49.1809V76.6573H45.09C43.7264 76.6573 42.6355 77.7432 42.6355 79.1006V82.1774C42.6355 83.5347 43.7264 84.6207 45.09 84.6207H64.9991C66.3628 84.6207 67.4537 83.5347 67.4537 82.1774V79.1006C67.4537 77.7432 66.3628 76.6573 64.9991 76.6573H60.9082V73.0376H71.9082L75.3628 83.0823C75.8173 84.7112 77.2718 85.7066 78.9991 85.7066C79.4537 85.7066 79.9991 85.6161 80.4537 85.4351C81.4537 85.0731 82.2718 84.2587 82.6355 83.2633C82.9991 82.2679 82.9991 81.1819 82.5446 80.277L79.2718 73.0376H80.5446C82.6355 73.0376 84.2718 71.4087 84.2718 69.3274V31.9539C84.09 29.8725 82.4537 28.2437 80.3628 28.2437ZM54.9991 69.6894H54.1809C53.7264 69.6894 53.2718 69.3274 53.2718 68.7844C53.2718 68.332 53.7264 67.8795 54.1809 67.8795H54.9991C55.5446 67.8795 55.9082 68.332 55.9082 68.7844C55.9082 69.2369 55.5446 69.6894 54.9991 69.6894ZM58.9991 61.0925C56.8173 55.663 59.4537 49.419 64.9082 47.2471C66.1809 46.7042 67.5446 46.4327 68.9082 46.4327C70.3628 46.4327 71.7264 46.7042 73.09 47.2471C75.7264 48.3331 77.7264 50.4144 78.8173 53.0387C79.9082 55.663 79.8173 58.5587 78.7264 61.183C78.1809 62.5404 77.3628 63.7168 76.3628 64.6218C75.3628 65.5267 74.1809 66.3411 72.9082 66.8841C67.3628 69.1464 61.1809 66.5221 58.9991 61.0925ZM80.7264 81.001C80.9991 81.5439 80.9991 82.0869 80.8173 82.6298C80.6355 83.1728 80.1809 83.5348 79.7264 83.7157C78.6355 84.1682 77.4537 83.5348 77.09 82.4488L72.4537 69.0559C72.8173 68.9654 73.2718 68.7844 73.6355 68.6034C74.09 68.4225 74.4537 68.2415 74.9082 67.97L80.7264 81.001ZM82.2718 64.4408H78.9082C79.4537 63.6263 79.9991 62.8119 80.3628 61.907C81.6355 58.8302 81.7264 55.482 80.4537 52.4052C79.1809 49.3285 76.8173 46.8852 73.7264 45.6183C70.6355 44.3514 67.2718 44.2609 64.1809 45.5278C57.8173 48.0616 54.6355 55.3915 57.2718 61.726C57.6355 62.7214 58.1809 63.6263 58.8173 64.4408H27.7264V31.8634C27.7264 30.8679 28.5446 30.0535 29.6355 30.0535H80.3628C81.4537 30.0535 82.2718 30.8679 82.2718 31.9539V64.4408Z"
                    fill="#F90945"
                  />
                  <path
                    d="M41.3627 34.3972V40.0077C41.3627 40.5507 40.9991 40.9127 40.4537 40.9127H34.8173C34.2718 40.9127 33.9082 40.5507 33.9082 40.0077V34.3972C33.9082 33.9447 34.2718 33.4922 34.8173 33.4922H40.4537C40.9991 33.4922 41.3627 33.9447 41.3627 34.3972ZM41.3627 44.8038V50.4144C41.3627 50.8669 40.9991 51.3193 40.4537 51.3193H34.8173C34.2718 51.3193 33.9082 50.8669 33.9082 50.4144V44.8038C33.9082 44.3514 34.2718 43.8989 34.8173 43.8989H40.4537C40.9991 43.8989 41.3627 44.3514 41.3627 44.8038ZM41.3627 55.301V60.9116C41.3627 61.4545 40.9991 61.8165 40.4537 61.8165H34.8173C34.2718 61.8165 33.9082 61.4545 33.9082 60.9116V55.301C33.9082 54.8485 34.2718 54.3961 34.8173 54.3961H40.4537C40.9991 54.3961 41.3627 54.7581 41.3627 55.301ZM46.09 36.1165H67.8173C68.3627 36.1165 68.7264 35.7546 68.7264 35.2116C68.7264 34.6687 68.3627 34.3067 67.8173 34.3067H46.09C45.5446 34.3067 45.1809 34.6687 45.1809 35.2116C45.1809 35.7546 45.6355 36.1165 46.09 36.1165ZM46.09 40.1887H75.1809C75.7264 40.1887 76.09 39.8267 76.09 39.2838C76.09 38.7408 75.7264 38.3789 75.1809 38.3789H46.09C45.5446 38.3789 45.1809 38.7408 45.1809 39.2838C45.1809 39.8267 45.6355 40.1887 46.09 40.1887ZM46.09 46.5232H55.4537C55.9991 46.5232 56.3627 46.1612 56.3627 45.6183C56.3627 45.0753 55.9991 44.7134 55.4537 44.7134H46.09C45.5446 44.7134 45.1809 45.0753 45.1809 45.6183C45.1809 46.1612 45.6355 46.5232 46.09 46.5232ZM46.09 50.5954H54.09C54.6355 50.5954 54.9991 50.2334 54.9991 49.6905C54.9991 49.1475 54.6355 48.7855 54.09 48.7855H46.09C45.5446 48.7855 45.1809 49.1475 45.1809 49.6905C45.1809 50.2334 45.6355 50.5954 46.09 50.5954ZM46.09 56.9299H51.6355C52.1809 56.9299 52.5446 56.5679 52.5446 56.025C52.5446 55.482 52.1809 55.12 51.6355 55.12H46.09C45.5446 55.12 45.1809 55.482 45.1809 56.025C45.1809 56.5679 45.6355 56.9299 46.09 56.9299ZM46.09 61.0925H53.2718C53.8173 61.0925 54.1809 60.7306 54.1809 60.1876C54.1809 59.6447 53.8173 59.2827 53.2718 59.2827H46.09C45.5446 59.2827 45.1809 59.6447 45.1809 60.1876C45.1809 60.7306 45.6355 61.0925 46.09 61.0925ZM75.1809 50.6859C73.4537 49.057 71.2718 48.1521 68.9082 48.1521H68.8173C63.9082 48.1521 59.9082 52.2243 59.9082 57.1109C59.9082 60.0066 61.2718 62.5404 63.4537 64.0788L63.5446 64.1693C65.09 65.2552 66.9082 65.9792 68.9082 65.9792H68.9991C70.9991 65.9792 72.9082 65.2552 74.3627 64.0788C74.3627 64.0788 74.4537 64.0788 74.4537 63.9883C76.5446 62.3594 77.9082 59.7352 77.9082 56.9299C77.8173 54.6676 76.9082 52.4052 75.1809 50.6859ZM74.3627 61.545C74.09 60.9116 73.6355 60.4591 72.9991 60.1876L71.2718 59.2827C71.09 59.1922 70.9991 59.0112 70.9991 58.8302V58.1968C71.8173 57.3823 72.3627 56.2059 72.3627 55.0295C72.3627 53.1292 70.8173 51.5908 68.9082 51.5908C67.9991 51.5908 67.09 51.9528 66.4537 52.5862C65.8173 53.2197 65.4537 54.1246 65.4537 55.0295C65.4537 55.9345 65.8173 56.9299 66.4537 57.7443C66.5446 57.9253 66.7264 58.0158 66.8173 58.1968V58.8302C66.8173 59.0112 66.7264 59.1922 66.5446 59.1922L64.8173 60.1876C64.1809 60.5496 63.7264 61.0021 63.4537 61.6355C62.4537 60.3686 61.8173 58.8302 61.8173 57.1109C61.8173 53.2197 64.9991 49.9619 68.9082 49.9619H68.9991C70.9082 49.9619 72.6355 50.6859 73.9991 52.0433C75.3628 53.4007 76.09 55.12 76.09 57.0204C75.9991 58.7397 75.4537 60.3686 74.3627 61.545Z"
                    fill="#F90945"
                  />
                </g>
                <defs>
                  <filter
                    id="filter0_d_783_2634"
                    x="0"
                    y="0.620483"
                    width="110"
                    height="109.542"
                    filterUnits="userSpaceOnUse"
                    color-interpolation-filters="sRGB"
                  >
                    <feFlood flood-opacity="0" result="BackgroundImageFix" />
                    <feColorMatrix
                      in="SourceAlpha"
                      type="matrix"
                      values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"
                      result="hardAlpha"
                    />
                    <feOffset />
                    <feGaussianBlur stdDeviation="2.5" />
                    <feComposite in2="hardAlpha" operator="out" />
                    <feColorMatrix
                      type="matrix"
                      values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.2 0"
                    />
                    <feBlend
                      mode="normal"
                      in2="BackgroundImageFix"
                      result="effect1_dropShadow_783_2634"
                    />
                    <feBlend
                      mode="normal"
                      in="SourceGraphic"
                      in2="effect1_dropShadow_783_2634"
                      result="shape"
                    />
                  </filter>
                  <clipPath id="clip0_783_2634">
                    <rect
                      width="60"
                      height="59.7252"
                      fill="white"
                      transform="translate(25 25.5289)"
                    />
                  </clipPath>
                </defs>
              </svg>
            </div>
            <div className="basis-[50%] text-center">
              <h3 className="mb-1 text-2xl font-medium">Thorough Screening</h3>
              <p className="text-sm font-medium leading-tight">
                We handle interviews and thorough background checks, ensuring
                you hire qualified, trustworthy candidates seamlessly.
              </p>
            </div>
            <div className="size-[100px] basis-[100px] rounded-full border p-2 shadow">
              <div className="flex size-full items-center justify-center rounded-full bg-primary text-sm text-white">
                Step 3
              </div>
            </div>
          </div>
        </motion.div>
      </div>
      <div className="flex h-full items-center justify-center">
        <div className="relative mx-auto h-full w-1 bg-primary">
          <svg
            className="absolute left-[-15px] top-[90px]"
            width="34"
            height="34"
            viewBox="0 0 34 34"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <g filter="url(#filter0_d_779_3535)">
              <ellipse cx="17" cy="16.945" rx="12" ry="11.945" fill="#FBFBFB" />
              <path
                d="M28.6695 14.1493C28.8146 14.7513 28.9138 15.3711 28.9634 16.0048L28.4649 16.0438C28.4881 16.3411 28.5 16.6416 28.5 16.945C28.5 17.2485 28.4881 17.549 28.4649 17.8463L28.9634 17.8853C28.9138 18.519 28.8146 19.1388 28.6695 19.7408L28.1834 19.6237C28.0415 20.2128 27.8538 20.7841 27.6243 21.3338L28.0857 21.5264C27.8428 22.1081 27.5551 22.6665 27.2268 23.1975L26.8015 22.9345C26.4848 23.4467 26.1287 23.9322 25.7373 24.3869L26.1163 24.7131C25.7073 25.1883 25.2614 25.6311 24.7831 26.0371L24.4595 25.656C24.0025 26.044 23.5145 26.3971 22.9999 26.7109L23.2603 27.1378C22.7277 27.4626 22.1677 27.7472 21.5845 27.9874L21.3941 27.5251C20.8433 27.7519 20.2709 27.9374 19.6809 28.0776L19.7965 28.564C19.1941 28.7071 18.5741 28.8051 17.9403 28.854L17.9018 28.3554C17.6043 28.3784 17.3036 28.3901 17 28.3901C16.6964 28.3901 16.3957 28.3784 16.0982 28.3554L16.0597 28.854C15.4259 28.8051 14.8059 28.7071 14.2035 28.564L14.3191 28.0776C13.7291 27.9374 13.1567 27.7519 12.6059 27.5251L12.4155 27.9874C11.8323 27.7472 11.2723 27.4626 10.7397 27.1378L11.0001 26.7109C10.4855 26.3971 9.99754 26.044 9.54047 25.656L9.21686 26.0371C8.73859 25.6311 8.29275 25.1883 7.88374 24.7131L8.26269 24.3869C7.8713 23.9322 7.51517 23.4467 7.19848 22.9345L6.77321 23.1975C6.44492 22.6665 6.15718 22.1081 5.9143 21.5264L6.3757 21.3338C6.14617 20.7841 5.95848 20.2128 5.81658 19.6237L5.33049 19.7408C5.18544 19.1388 5.0862 18.519 5.03663 17.8853L5.53511 17.8463C5.51185 17.549 5.5 17.2485 5.5 16.945C5.5 16.6416 5.51185 16.3411 5.53511 16.0438L5.03663 16.0048C5.0862 15.3711 5.18544 14.7513 5.33049 14.1493L5.81658 14.2664C5.95848 13.6773 6.14617 13.106 6.3757 12.5563L5.9143 12.3637C6.15718 11.782 6.44492 11.2236 6.77321 10.6926L7.19848 10.9556C7.51517 10.4434 7.8713 9.95788 8.26269 9.50318L7.88375 9.17699C8.29275 8.70184 8.73859 8.25903 9.21686 7.85296L9.54047 8.23411C9.99754 7.84605 10.4855 7.49302 11.0001 7.17917L10.7397 6.7523C11.2723 6.42748 11.8323 6.14287 12.4155 5.9027L12.6059 6.36503C13.1567 6.13819 13.7291 5.95273 14.3191 5.81254L14.2035 5.32608C14.8059 5.18295 15.4259 5.08503 16.0597 5.03613L16.0982 5.53465C16.3957 5.5117 16.6964 5.5 17 5.5C17.3036 5.5 17.6043 5.5117 17.9018 5.53465L17.9403 5.03613C18.5741 5.08503 19.1941 5.18295 19.7965 5.32608L19.6809 5.81254C20.2709 5.95273 20.8433 6.13819 21.3941 6.36503L21.5845 5.9027C22.1677 6.14287 22.7277 6.42748 23.2603 6.7523L22.9999 7.17917C23.5145 7.49302 24.0025 7.84605 24.4595 8.23411L24.7831 7.85296C25.2614 8.25903 25.7073 8.70184 26.1163 9.17699L25.7373 9.50318C26.1287 9.95788 26.4848 10.4434 26.8015 10.9556L27.2268 10.6926C27.5551 11.2236 27.8428 11.782 28.0857 12.3637L27.6243 12.5563C27.8538 13.106 28.0415 13.6773 28.1834 14.2664L28.6695 14.1493Z"
                stroke="#F90945"
                stroke-dasharray="2 2"
              />
            </g>
            <g filter="url(#filter1_d_779_3535)">
              <ellipse cx="17" cy="16.945" rx="9" ry="8.95879" fill="#F90945" />
            </g>
            <defs>
              <filter
                id="filter0_d_779_3535"
                x="0"
                y="0"
                width="34"
                height="33.8901"
                filterUnits="userSpaceOnUse"
                color-interpolation-filters="sRGB"
              >
                <feFlood flood-opacity="0" result="BackgroundImageFix" />
                <feColorMatrix
                  in="SourceAlpha"
                  type="matrix"
                  values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"
                  result="hardAlpha"
                />
                <feOffset />
                <feGaussianBlur stdDeviation="2.5" />
                <feComposite in2="hardAlpha" operator="out" />
                <feColorMatrix
                  type="matrix"
                  values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.2 0"
                />
                <feBlend
                  mode="normal"
                  in2="BackgroundImageFix"
                  result="effect1_dropShadow_779_3535"
                />
                <feBlend
                  mode="normal"
                  in="SourceGraphic"
                  in2="effect1_dropShadow_779_3535"
                  result="shape"
                />
              </filter>
              <filter
                id="filter1_d_779_3535"
                x="3"
                y="2.98624"
                width="28"
                height="27.9176"
                filterUnits="userSpaceOnUse"
                color-interpolation-filters="sRGB"
              >
                <feFlood flood-opacity="0" result="BackgroundImageFix" />
                <feColorMatrix
                  in="SourceAlpha"
                  type="matrix"
                  values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"
                  result="hardAlpha"
                />
                <feOffset />
                <feGaussianBlur stdDeviation="2.5" />
                <feComposite in2="hardAlpha" operator="out" />
                <feColorMatrix
                  type="matrix"
                  values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.2 0"
                />
                <feBlend
                  mode="normal"
                  in2="BackgroundImageFix"
                  result="effect1_dropShadow_779_3535"
                />
                <feBlend
                  mode="normal"
                  in="SourceGraphic"
                  in2="effect1_dropShadow_779_3535"
                  result="shape"
                />
              </filter>
            </defs>
          </svg>
        </div>
      </div>
      <div className="basis-[45%]"></div>
    </div>
  );
};

export default TimelineStep3;
